当前进度：2.2.2


## 第一章 Node简介

1. 单线程与多线程
```
Node 保持了JavaScript浏览器中单线程的特点。单线程最大的好处是不用像多行程那样处处在意状态的同步问题，没有死锁的存在。
```

单线程同时避免这些问题：

```
- 无法利用多核CPU
- 错误会引起整个引用退出，引用的健壮性值得考验
- 大量计算占用CPU导致无继续调用异步I/O。
```

Node通过子进程 child_process的方式解决单线程中计算量大的问题。


## 第二章 Node的模块实现

1. 模块标识
```
- 模块标识就是传递给require()方法的参数，它必须是符合小驼峰命名的字符串，或者以. / ..开头的相对路径，或者是绝对路径。

- require在分析标识符时，对于标识符不包含扩展名的情况，Node会一次按.js,.node,.json次序补足扩展名。因此，对于.node,.json文件，带上扩展名，会加快文件定位的速度。

小驼峰命名：
第一个单词首字母小写，后面其他单词首字母大写，如 className, baseUtil

```

2. Node的模块

Node的模块分为2类：
```
- 核心模块：Node直接提供的模块，在Node源代码的编译过程中，已经编写成了二进制可执行文件， 在Node进程启动时，部分核心模块被直接加载在内容，其加载速度最快。如：fs，http，path
- 文件模块：文件模块在运行时动态加载，需要完整的【路径分析，文件定位，编译执行】过程，速度比核心模块慢。
```

3. Node 目录分析和包
```
文件定位的顺序： 缓存加载 > 核心模块 > 路径形式的文件模块 > 自定义模块（非核心模块，非路径形式的标识符）

 require()通过分析文件扩展名之后，可能没有找对对应的文件，此时，会将改文件名当做一个目录名称，并当做一个包处理。
 1. 在当前目录中查找package.json文件，JSON.parse解析包描述对象，取main属性对应的文件进行定位
 2. 如果没有package.json 文件或者文件内容出错，则node会将index作为默认文件名，并按照index.js,index.node,index.json的次序查找。
 3. 如果在目录分析的过程中没有成功定位任何文件，则进入下一个模块路径进行查找。
 4. 如果模块路径都遍历完成，都未定位，则报错。
```

4. Node,W3c,Commonjs ECMAScript之间的关系

    ![img](asserts/relation.png)

 